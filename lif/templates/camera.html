{% extends "base.html" %}

{% block title %}Live Camera - LipLearn{% endblock %}
{% block meta_description %}Real-time lip reading analysis with AI-powered predictions and confidence scores.{% endblock %}

{% block content %}
<section class="camera-section py-5">
    <div class="container">
        <div class="row text-center mb-4">
            <div class="col-lg-8 mx-auto">
                <h1 class="display-5 fw-bold mb-3">
                    <i class="fas fa-camera gradient-text me-3"></i>
                    Live <span class="gradient-text">Camera</span> Analysis
                </h1>
                <p class="lead text-muted">Speak naturally and see real-time lip reading predictions</p>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="camera-container">
                    <div class="card bg-dark-card border-0 shadow-lg">
                        <div class="card-body p-4">
                            <!-- Camera Feed -->
                            <div class="camera-feed-container mb-4">
                                <video id="cameraFeed" class="camera-feed" autoplay muted playsinline></video>
                                <canvas id="cameraCanvas" class="camera-canvas" style="display: none;"></canvas>
                                <div class="camera-overlay">
                                    <div class="recording-indicator" id="recordingIndicator">
                                        <i class="fas fa-circle text-danger pulse-animation"></i>
                                        <span>Recording</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Controls -->
                            <div class="camera-controls text-center mb-4">
                                <button id="startCamera" class="btn btn-primary btn-lg me-3">
                                    <i class="fas fa-play me-2"></i>Start Camera
                                </button>
                                <button id="stopCamera" class="btn btn-danger btn-lg" style="display: none;">
                                    <i class="fas fa-stop me-2"></i>Stop Camera
                                </button>
                            </div>
                            
                            <!-- Predictions -->
                            <div class="predictions-container">
                                <h5 class="text-light mb-3">
                                    <i class="fas fa-chart-bar gradient-text me-2"></i>
                                    Top Predictions
                                </h5>
                                <div id="predictionsList" class="predictions-list">
                                    <div class="prediction-placeholder text-center text-muted py-4">
                                        <i class="fas fa-microphone-slash fa-2x mb-3"></i>
                                        <p>Start camera to see predictions</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tips Sidebar -->
            <div class="col-lg-4">
                <div class="tips-container">
                    <div class="card bg-dark-card border-0 shadow-lg">
                        <div class="card-body">
                            <h5 class="card-title text-light mb-3">
                                <i class="fas fa-lightbulb gradient-text me-2"></i>
                                Tips for Better Results
                            </h5>
                            <ul class="tips-list">
                                <li class="tip-item">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    Ensure good lighting on your face
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    Position camera at eye level
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    Speak clearly and naturally
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    Keep your face centered
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    Avoid covering your mouth
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Stats Card -->
                    <div class="card bg-dark-card border-0 shadow-lg mt-4">
                        <div class="card-body">
                            <h5 class="card-title text-light mb-3">
                                <i class="fas fa-chart-line gradient-text me-2"></i>
                                Session Stats
                            </h5>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="totalPredictions">0</div>
                                    <div class="stat-label">Predictions</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="avgConfidence">0%</div>
                                    <div class="stat-label">Avg Confidence</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="sessionTime">00:00</div>
                                    <div class="stat-label">Session Time</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="topSyllable">-</div>
                                    <div class="stat-label">Most Common</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/camera.js') }}"></script>
{% endblock %}
